{"version":"0.1.0","name":"ticketing_system","instructions":[{"name":"registerUser","accounts":[{"name":"authority","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"userProfile","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"dataHash","type":{"array":["u8",32]}}]},{"name":"initialize","accounts":[{"name":"authority","isMut":true,"isSigner":true},{"name":"treasury","isMut":false,"isSigner":false},{"name":"globalConfig","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"authority","type":"publicKey"},{"name":"treasury","type":"publicKey"},{"name":"marketplaceFeeBps","type":"u16"}]},{"name":"togglePause","accounts":[{"name":"globalConfig","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"paused","type":"bool"}]},{"name":"createBuyerCounter","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"event","isMut":false,"isSigner":false},{"name":"buyer","isMut":false,"isSigner":false},{"name":"buyerTicketCount","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"manageWhitelist","accounts":[{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"whitelist","isMut":true,"isSigner":false},{"name":"wallet","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"walletAddress","type":"publicKey"},{"name":"isWhitelisted","type":"bool"}]},{"name":"updateEventDetails","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"metadataUri","type":{"option":"string"}},{"name":"salesStartDate","type":{"option":"i64"}},{"name":"salesEndDate","type":{"option":"i64"}},{"name":"resaleAllowed","type":{"option":"bool"}},{"name":"royaltyBps","type":{"option":"u16"}}]},{"name":"createEvent","accounts":[{"name":"whitelistAccount","isMut":false,"isSigner":false},{"name":"eventAccount","isMut":true,"isSigner":false},{"name":"controller","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"eventId","type":"u64"},{"name":"metadataUri","type":"string"},{"name":"salesStartDate","type":"i64"},{"name":"salesEndDate","type":"i64"},{"name":"royaltyBps","type":"u16"},{"name":"maxTicketsPerWallet","type":"u8"},{"name":"tiersInput","type":{"vec":{"defined":"TierInput"}}}]},{"name":"addTicketTier","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"name","type":"string"},{"name":"priceLamports","type":"u64"},{"name":"maxTicketsSupply","type":"u32"}]},{"name":"addValidator","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"validator","type":"publicKey"}]},{"name":"removeValidator","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"validator","type":"publicKey"}]},{"name":"cancelEvent","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[]},{"name":"withdrawFunds","accounts":[{"name":"event","isMut":false,"isSigner":false},{"name":"controller","isMut":true,"isSigner":true},{"name":"refundReserve","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"mintTicket","accounts":[{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"event","isMut":true,"isSigner":false},{"name":"refundReserve","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"buyerTicketCount","isMut":true,"isSigner":false},{"name":"mintAccount","isMut":true,"isSigner":true},{"name":"metadataAccount","isMut":true,"isSigner":false},{"name":"associatedTokenAccount","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"ticket","isMut":true,"isSigner":false}],"args":[{"name":"tierIndex","type":"u8"}]},{"name":"mintFreeTicket","accounts":[{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"event","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"buyer","isMut":false,"isSigner":false},{"name":"ticket","isMut":true,"isSigner":false},{"name":"buyerTicketCount","isMut":true,"isSigner":false},{"name":"mintAccount","isMut":true,"isSigner":true},{"name":"associatedTokenAccount","isMut":true,"isSigner":false},{"name":"metadataAccount","isMut":true,"isSigner":false},{"name":"metadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"tierIndex","type":"u8"}]},{"name":"claimRefund","accounts":[{"name":"event","isMut":false,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"ticket","isMut":true,"isSigner":false},{"name":"nftToken","isMut":true,"isSigner":false},{"name":"nftMint","isMut":true,"isSigner":false},{"name":"refundReserve","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"listForSale","accounts":[{"name":"seller","isMut":true,"isSigner":true},{"name":"event","isMut":false,"isSigner":false},{"name":"ticket","isMut":false,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false},{"name":"sellerTokenAccount","isMut":true,"isSigner":false},{"name":"listing","isMut":true,"isSigner":false},{"name":"escrowAccount","isMut":false,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"price","type":"u64"}]},{"name":"cancelListing","accounts":[{"name":"seller","isMut":true,"isSigner":true},{"name":"listing","isMut":true,"isSigner":false},{"name":"ticket","isMut":false,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false},{"name":"escrowAccount","isMut":true,"isSigner":false},{"name":"sellerTokenAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"buyFromMarketplace","accounts":[{"name":"buyer","isMut":true,"isSigner":true},{"name":"listing","isMut":true,"isSigner":false},{"name":"seller","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"eventController","isMut":true,"isSigner":false},{"name":"ticket","isMut":true,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false},{"name":"escrowAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"buyerTokenAccount","isMut":true,"isSigner":false},{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"event","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"redeemTicket","accounts":[{"name":"ticket","isMut":true,"isSigner":false},{"name":"event","isMut":false,"isSigner":false},{"name":"validator","isMut":false,"isSigner":true},{"name":"owner","isMut":false,"isSigner":false},{"name":"nftToken","isMut":false,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"BuyerTicketCount","type":{"kind":"struct","fields":[{"name":"event","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"count","type":"u8"}]}},{"name":"Event","type":{"kind":"struct","fields":[{"name":"eventId","type":"u64"},{"name":"controller","type":"publicKey"},{"name":"salesStartDate","type":"i64"},{"name":"salesEndDate","type":"i64"},{"name":"totalTicketsSold","type":"u32"},{"name":"tiers","type":{"vec":{"defined":"TicketTier"}}},{"name":"maxTicketsPerWallet","type":"u8"},{"name":"resaleAllowed","type":"bool"},{"name":"transferFeeBps","type":"u16"},{"name":"royaltyBps","type":"u16"},{"name":"canceled","type":"bool"},{"name":"state","type":"u8"},{"name":"metadataUri","type":"string"},{"name":"refundReserve","type":"publicKey"},{"name":"validators","type":{"vec":"publicKey"}}]}},{"name":"GlobalConfig","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"treasury","type":"publicKey"},{"name":"marketplaceFeeBps","type":"u16"},{"name":"paused","type":"bool"}]}},{"name":"MarketplaceListing","type":{"kind":"struct","fields":[{"name":"seller","type":"publicKey"},{"name":"nftMint","type":"publicKey"},{"name":"price","type":"u64"},{"name":"escrowAccount","type":"publicKey"}]}},{"name":"Ticket","type":{"kind":"struct","fields":[{"name":"event","type":"publicKey"},{"name":"nftMint","type":"publicKey"},{"name":"owner","type":"publicKey"},{"name":"redeemed","type":"bool"},{"name":"redeemedBy","type":"publicKey"},{"name":"redeemedAt","type":"i64"},{"name":"pricePaid","type":"u64"}]}},{"name":"UserProfile","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"dataHash","type":{"array":["u8",32]}}]}},{"name":"Whitelist","type":{"kind":"struct","fields":[{"name":"wallet","type":"publicKey"},{"name":"isWhitelisted","type":"bool"}]}}],"types":[{"name":"TierInput","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"priceLamports","type":"u64"},{"name":"maxTicketsSupply","type":"u32"}]}},{"name":"TicketTier","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"priceLamports","type":"u64"},{"name":"maxTicketsSupply","type":"u32"},{"name":"ticketsSold","type":"u32"}]}},{"name":"EventState","type":{"kind":"enum","variants":[{"name":"Draft"},{"name":"Active"},{"name":"Finished"},{"name":"Canceled"}]}}],"events":[{"name":"TicketSold","fields":[{"name":"listingKey","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"price","type":"u64","index":false}]},{"name":"EventCanceled","fields":[{"name":"eventKey","type":"publicKey","index":false},{"name":"controller","type":"publicKey","index":false}]},{"name":"ListingCanceled","fields":[{"name":"listingKey","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false}]},{"name":"RefundClaimed","fields":[{"name":"event","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"EventCreated","fields":[{"name":"eventKey","type":"publicKey","index":false},{"name":"eventId","type":"u64","index":false},{"name":"controller","type":"publicKey","index":false},{"name":"metadataUri","type":"string","index":false}]},{"name":"ItemListed","fields":[{"name":"listingKey","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"price","type":"u64","index":false}]},{"name":"TicketMinted","fields":[{"name":"ticketPda","type":"publicKey","index":false},{"name":"event","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false}]},{"name":"TicketRedeemed","fields":[{"name":"ticketPda","type":"publicKey","index":false},{"name":"event","type":"publicKey","index":false},{"name":"redeemedBy","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false}]},{"name":"FundsWithdrawn","fields":[{"name":"event","type":"publicKey","index":false},{"name":"controller","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":6000,"name":"ProgramPaused","msg":"Programa pausado."},{"code":6001,"name":"NotWhitelisted","msg":"Carteira sem permissão (whitelist)."},{"code":6002,"name":"InvalidAuthority","msg":"Autoridade inválida."},{"code":6003,"name":"InvalidDate","msg":"Data inválida ou fora de ordem."},{"code":6004,"name":"StringTooLong","msg":"String longa demais para o campo."},{"code":6005,"name":"EventCanceled","msg":"Evento cancelado."},{"code":6006,"name":"EventAlreadyCanceled","msg":"Evento já foi cancelado anteriormente."},{"code":6007,"name":"EventNotCanceled","msg":"Ação exige que o evento esteja cancelado."},{"code":6008,"name":"EventNotActive","msg":"Evento não está ativo."},{"code":6009,"name":"EventNotEnded","msg":"Evento ainda não terminou."},{"code":6010,"name":"EventNotOverYet","msg":"Saques permitidos apenas após o fim do evento."},{"code":6011,"name":"SalesNotActive","msg":"As vendas não estão ativas."},{"code":6012,"name":"SalesAlreadyStarted","msg":"As vendas já começaram."},{"code":6013,"name":"TicketLimitExceeded","msg":"Limite de ingressos excedido."},{"code":6014,"name":"CannotUpdateAfterSalesStart","msg":"Não é possível alterar o evento após início das vendas."},{"code":6015,"name":"NoTicketsSold","msg":"Não há ingressos vendidos para este evento."},{"code":6016,"name":"SoldOut","msg":"Ingressos esgotados."},{"code":6017,"name":"MaxTiersReached","msg":"Limite máximo de tipos de ingresso (tiers) atingido."},{"code":6018,"name":"MaxTicketsPerWalletExceeded","msg":"Limite de ingressos por carteira excedido."},{"code":6019,"name":"InvalidTierIndex","msg":"Índice do tipo de ingresso (tier) inválido."},{"code":6020,"name":"TicketsAlreadySold","msg":"Não é possível adicionar tiers após a venda de ingressos."},{"code":6021,"name":"TicketTierNotFree","msg":"Este tipo de ingresso não é gratuito."},{"code":6022,"name":"AlreadyRedeemed","msg":"Ingresso já resgatado (redeemed)."},{"code":6023,"name":"EventNotInProgress","msg":"Ingressos só podem ser resgatados durante o evento."},{"code":6024,"name":"InvalidOwner","msg":"Dono do ingresso inválido."},{"code":6025,"name":"InvalidValidator","msg":"Validador não registrado para este evento."},{"code":6026,"name":"MaxValidatorsReached","msg":"Limite máximo de validadores atingido."},{"code":6027,"name":"EventMismatch","msg":"O ingresso não pertence a este evento."},{"code":6028,"name":"InvalidTicketMint","msg":"Mint do NFT do ingresso é inválido."},{"code":6029,"name":"ResaleNotAllowed","msg":"Revenda de ingressos não permitida para este evento."},{"code":6030,"name":"InvalidPrice","msg":"Preço de listagem inválido."},{"code":6031,"name":"InvalidSeller","msg":"Vendedor inválido para esta listagem."},{"code":6032,"name":"EventIsCanceled","msg":"Não é possível comprar ingressos de um evento cancelado."},{"code":6033,"name":"InsufficientFunds","msg":"Fundos insuficientes."},{"code":6034,"name":"InvalidController","msg":"Controlador do evento inválido."}]}
